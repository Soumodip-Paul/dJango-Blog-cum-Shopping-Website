{% extends 'blog/temp.html' %}

{% block title %}
Blogs - Comitra Blog
{% endblock %}
{% block main %}
<main class="container mt-3">
    <script>let elem</script>
    <h3 style="font-family: 'Roboto', sans-serif;">Search results for Blog</h3>
    <br>
    {% if length != 0 %}
    <div class="list-group">
        {% for blog in blogs %}
        <a href="./{{blog.blog_id}}" class="list-group-item list-group-item-action d-flex gap-3 py-3 rounded-2"
            aria-current="true">
            <img src="{% if blog.blog_image  %}/media/{{blog.blog_image}}{% else %}https://github.com/twbs.png{% endif %}"
                id="li{{blog.blog_id}}" alt="twbs" width="32" height="32" class="rounded-circle flex-shrink-0">
            <div class="d-flex gap-2 w-100 justify-content-between">
                <div>
                    <h4 class="mb-3">{{blog.blog_title}}</h6>
                        <p class="mb-0 opacity-75" id="lp{{blog.blog_id}}"></p>
                </div>
                <small class="opacity-50 text-nowrap" id="ld{{blog.blog_id}}">{{blog.date}}</small>
                <script>
                    elem = document.createElement('div')
                    elem.innerHTML = `{{blog.blog_content|safe}}`
                    document.getElementById("lp{{blog.blog_id}}").innerText = elem.innerText.substr(0, 100).split(/\s+/).filter(elem => elem !== '').join(' ')
                    elem.remove()
                </script>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <p class="fst-italic">No Blog Posts Available... </p>
    {% endif %}
</main>
{% endblock %}